<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNCAGED | Creator Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'DM Sans', sans-serif; background: #0D0D0D; color: #FFFFFF; min-height: 100vh; }
        
        .header { position: fixed; top: 0; left: 0; right: 0; height: 60px; background: rgba(13, 13, 13, 0.95); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; z-index: 1000; border-bottom: 1px solid #1A1A1A; }
        .header-left { display: flex; align-items: center; gap: 20px; }
        .back-btn { background: #1A1A1A; border: none; color: #FFFFFF; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; text-decoration: none; }
        .back-btn:hover { background: #2A2A2A; }
        .logo { font-family: 'Bebas Neue', sans-serif; font-size: 28px; letter-spacing: 3px; background: linear-gradient(135deg, #F5A623 0%, #D4880F 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-decoration: none; }
        .header-right { display: flex; align-items: center; gap: 15px; }
        .header-btn { background: #1A1A1A; border: none; color: #FFFFFF; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; text-decoration: none; }
        .profile-avatar-header { width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, #6B2FEB 0%, #4A1FB8 100%); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; cursor: pointer; text-decoration: none; color: #FFFFFF; }
        
        .banner { height: 250px; background: linear-gradient(135deg, #1a1a2e 0%, #2d1f3d 50%, #1a1a2e 100%); position: relative; margin-top: 60px; }
        .banner-overlay { position: absolute; bottom: 0; left: 0; right: 0; height: 100px; background: linear-gradient(transparent, #0D0D0D); }
        
        .profile-section { max-width: 1200px; margin: -80px auto 0; padding: 0 30px 40px; position: relative; z-index: 10; }
        .profile-header { display: flex; align-items: flex-end; gap: 25px; margin-bottom: 30px; }
        .profile-avatar { width: 150px; height: 150px; border-radius: 50%; background: linear-gradient(135deg, #6B2FEB 0%, #4A1FB8 100%); display: flex; align-items: center; justify-content: center; font-size: 60px; font-weight: 700; border: 5px solid #0D0D0D; flex-shrink: 0; }
        .profile-info { flex: 1; padding-bottom: 10px; }
        .profile-name { font-size: 32px; font-weight: 700; display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
        .verified-badge { background: #F5A623; color: #0D0D0D; font-size: 12px; padding: 4px 10px; border-radius: 12px; font-weight: 700; }
        .profile-handle { color: #888; font-size: 16px; margin-bottom: 15px; }
        .profile-stats { display: flex; gap: 30px; }
        .stat-value { font-size: 22px; font-weight: 700; }
        .stat-label { font-size: 13px; color: #888; }
        .profile-actions { display: flex; gap: 12px; padding-bottom: 10px; }
        .subscribe-btn { background: linear-gradient(135deg, #F5A623 0%, #D4880F 100%); border: none; color: #0D0D0D; padding: 14px 35px; border-radius: 25px; font-size: 16px; font-weight: 700; cursor: pointer; text-decoration: none; transition: all 0.2s ease; }
        .subscribe-btn:hover { transform: scale(1.05); box-shadow: 0 5px 25px rgba(245, 166, 35, 0.3); }
        .action-btn { background: #1A1A1A; border: none; color: #FFFFFF; padding: 14px 25px; border-radius: 25px; font-size: 14px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .action-btn:hover { background: #2A2A2A; }
        
        .profile-bio { margin-bottom: 30px; padding: 20px; background: #1A1A1A; border-radius: 16px; }
        .bio-text { font-size: 15px; color: #B3B3B3; line-height: 1.6; white-space: pre-wrap; }
        .social-links { display: flex; gap: 15px; margin-top: 15px; }
        .social-link { color: #F5A623; text-decoration: none; font-size: 14px; }
        .social-link:hover { text-decoration: underline; }
        
        .tabs { display: flex; gap: 5px; border-bottom: 1px solid #1A1A1A; margin-bottom: 30px; }
        .tab { background: transparent; border: none; color: #888; padding: 15px 25px; font-size: 15px; font-weight: 600; cursor: pointer; position: relative; }
        .tab:hover { color: #FFFFFF; }
        .tab.active { color: #F5A623; }
        .tab.active::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 3px; background: #F5A623; border-radius: 3px 3px 0 0; }
        
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        .video-card { cursor: pointer; transition: transform 0.2s ease; text-decoration: none; color: #FFFFFF; }
        .video-card:hover { transform: translateY(-5px); }
        .video-thumbnail { position: relative; aspect-ratio: 16/9; background: #1A1A1A; border-radius: 12px; overflow: hidden; margin-bottom: 12px; }
        .video-thumbnail img { width: 100%; height: 100%; object-fit: cover; }
        .video-thumbnail-placeholder { width: 100%; height: 100%; background: linear-gradient(135deg, #2d1f3d 0%, #1a1a2e 100%); display: flex; align-items: center; justify-content: center; font-size: 40px; }
        .video-duration { position: absolute; bottom: 10px; right: 10px; background: rgba(0,0,0,0.85); padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; }
        .video-badge { position: absolute; top: 10px; left: 10px; background: #F5A623; color: #0D0D0D; padding: 4px 10px; border-radius: 4px; font-size: 11px; font-weight: 700; }
        .video-title { font-size: 15px; font-weight: 600; margin-bottom: 5px; line-height: 1.3; }
        .video-meta { font-size: 13px; color: #888; }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .tiers-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .tier-card { background: #1A1A1A; border: 2px solid #2A2A2A; border-radius: 16px; padding: 25px; position: relative; }
        .tier-card.popular { border-color: #F5A623; }
        .popular-badge { position: absolute; top: -12px; right: 20px; background: #F5A623; color: #0D0D0D; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: 700; }
        .tier-name { font-size: 20px; font-weight: 700; margin-bottom: 5px; }
        .tier-price { font-size: 28px; font-weight: 700; color: #F5A623; margin-bottom: 15px; }
        .tier-price span { font-size: 14px; color: #888; font-weight: 400; }
        .tier-features { list-style: none; margin-bottom: 20px; }
        .tier-features li { padding: 8px 0; color: #B3B3B3; font-size: 14px; display: flex; align-items: center; gap: 10px; }
        .tier-features li::before { content: "‚úì"; color: #1DB954; font-weight: 700; }
        .tier-btn { width: 100%; background: linear-gradient(135deg, #F5A623 0%, #D4880F 100%); border: none; color: #0D0D0D; padding: 14px; border-radius: 10px; font-weight: 700; cursor: pointer; text-decoration: none; display: block; text-align: center; }
        
        .empty-state { text-align: center; padding: 60px 20px; color: #888; }
        .empty-state-icon { font-size: 60px; margin-bottom: 20px; }
        .empty-state h3 { color: #FFFFFF; margin-bottom: 10px; }
        
        .loading { text-align: center; padding: 60px; }
        .spinner { width: 40px; height: 40px; border: 3px solid #333; border-radius: 50%; border-top-color: #F5A623; animation: spin 0.8s linear infinite; margin: 0 auto 15px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        @media (max-width: 768px) {
            .profile-header { flex-direction: column; align-items: center; text-align: center; }
            .profile-avatar { width: 100px; height: 100px; font-size: 40px; }
            .profile-stats { justify-content: center; }
            .profile-actions { justify-content: center; flex-wrap: wrap; }
            .video-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <a href="browse.html" class="back-btn">‚Üê</a>
            <a href="index.html" class="logo">UNCAGED</a>
        </div>
        <div class="header-right">
            <a href="browse.html" class="header-btn">üîç</a>
            <a href="#" class="header-btn">üîî</a>
            <a href="dashboard.html" class="profile-avatar-header" id="headerAvatar">?</a>
        </div>
    </header>

    <div class="banner"><div class="banner-overlay"></div></div>

    <section class="profile-section">
        <div class="profile-header">
            <div class="profile-avatar" id="creatorAvatar">?</div>
            <div class="profile-info">
                <h1 class="profile-name">
                    <span id="creatorName">Loading...</span>
                    <span class="verified-badge" id="verifiedBadge" style="display: none;">‚úì VERIFIED</span>
                </h1>
                <p class="profile-handle" id="creatorHandle">@loading</p>
                <div class="profile-stats">
                    <div class="stat"><div class="stat-value" id="subscriberCount">0</div><div class="stat-label">Subscribers</div></div>
                    <div class="stat"><div class="stat-value" id="videoCount">0</div><div class="stat-label">Videos</div></div>
                    <div class="stat"><div class="stat-value" id="viewCount">0</div><div class="stat-label">Total Views</div></div>
                </div>
            </div>
            <div class="profile-actions">
                <a href="subscribe.html" class="subscribe-btn" id="subscribeBtn">Subscribe $9.99/mo</a>
                <button class="action-btn">üí¨ Message</button>
                <button class="action-btn">üîî Notify</button>
            </div>
        </div>

        <div class="profile-bio">
            <p class="bio-text" id="creatorBio">Loading bio...</p>
            <div class="social-links" id="socialLinks"></div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('videos')">Videos</button>
            <button class="tab" onclick="showTab('tiers')">Subscription Tiers</button>
            <button class="tab" onclick="showTab('about')">About</button>
        </div>

        <div class="tab-content active" id="videosTab">
            <div class="video-grid" id="creatorVideos">
                <div class="loading"><div class="spinner"></div><p>Loading videos...</p></div>
            </div>
        </div>

        <div class="tab-content" id="tiersTab">
            <div class="tiers-grid">
                <div class="tier-card">
                    <h3 class="tier-name">Basic</h3>
                    <div class="tier-price">$4.99 <span>/month</span></div>
                    <ul class="tier-features">
                        <li>Access to all public videos</li>
                        <li>Support the creator</li>
                        <li>Cancel anytime</li>
                    </ul>
                    <a href="subscribe.html" class="tier-btn">Subscribe</a>
                </div>
                <div class="tier-card popular">
                    <span class="popular-badge">MOST POPULAR</span>
                    <h3 class="tier-name">Premium</h3>
                    <div class="tier-price">$9.99 <span>/month</span></div>
                    <ul class="tier-features">
                        <li>Everything in Basic</li>
                        <li>Exclusive behind-the-scenes</li>
                        <li>Early access to new videos</li>
                        <li>Direct messages</li>
                    </ul>
                    <a href="subscribe.html" class="tier-btn">Subscribe</a>
                </div>
                <div class="tier-card">
                    <h3 class="tier-name">VIP</h3>
                    <div class="tier-price">$19.99 <span>/month</span></div>
                    <ul class="tier-features">
                        <li>Everything in Premium</li>
                        <li>Uncut & uncensored content</li>
                        <li>Monthly video calls</li>
                        <li>Custom content requests</li>
                    </ul>
                    <a href="subscribe.html" class="tier-btn">Subscribe</a>
                </div>
            </div>
        </div>

        <div class="tab-content" id="aboutTab">
            <div class="profile-bio">
                <h3 style="margin-bottom: 15px;">About</h3>
                <p class="bio-text" id="creatorAbout">Loading...</p>
            </div>
        </div>
    </section>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, collection, getDocs, query, where, orderBy } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDNPN3jptNzbR8vWy5hnVCuLoIBK2AW_HQ",
            authDomain: "uncaged-85b49.firebaseapp.com",
            projectId: "uncaged-85b49",
            storageBucket: "uncaged-85b49.firebasestorage.app",
            messagingSenderId: "957750920887",
            appId: "1:957750920887:web:9af4d847dad76c876d2f32"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const urlParams = new URLSearchParams(window.location.search);
        const creatorId = urlParams.get('id');

        onAuthStateChanged(auth, (user) => {
            if (user) {
                const initial = user.displayName ? user.displayName[0].toUpperCase() : user.email[0].toUpperCase();
                document.getElementById('headerAvatar').textContent = initial;
            }
        });

        // Show demo profile
        function showDemoProfile() {
            document.getElementById('creatorAvatar').textContent = 'V';
            document.getElementById('creatorName').textContent = 'Visa Vic';
            document.getElementById('creatorHandle').textContent = '@visavic';
            document.getElementById('creatorBio').textContent = 'Travel creator sharing authentic experiences from around the world. Nightlife, dating, culture - the content YouTube won\'t let me post. üåç‚úàÔ∏è';
            document.getElementById('creatorAbout').textContent = 'Hey! I\'m Vic, a travel content creator focused on showing you the REAL side of international travel.\n\nNo filters, no BS - just authentic experiences from nightlife to dating culture to hidden gems.\n\nI started Uncaged because YouTube kept restricting my content. Here, I share everything uncensored.';
            document.getElementById('subscriberCount').textContent = '12.4K';
            document.getElementById('videoCount').textContent = '156';
            document.getElementById('viewCount').textContent = '2.1M';
            document.getElementById('verifiedBadge').style.display = 'inline-block';
            document.getElementById('socialLinks').innerHTML = `
                <a href="#" class="social-link">üì∫ YouTube</a>
                <a href="#" class="social-link">üì∑ Instagram</a>
            `;
            document.title = 'Visa Vic | UNCAGED';
        }

        // Load videos
        async function loadVideos() {
            const container = document.getElementById('creatorVideos');
            try {
                const videosRef = collection(db, 'videos');
                const q = creatorId 
                    ? query(videosRef, where('creatorId', '==', creatorId), orderBy('createdAt', 'desc'))
                    : query(videosRef, orderBy('createdAt', 'desc'));
                const snapshot = await getDocs(q);

                if (snapshot.empty) {
                    container.innerHTML = '<div class="empty-state" style="grid-column:1/-1;"><div class="empty-state-icon">üé¨</div><h3>No Videos Yet</h3><p>Check back soon!</p></div>';
                    return;
                }

                let html = '';
                snapshot.forEach(doc => {
                    const v = doc.data();
                    html += `
                        <a href="watch.html?v=${v.bunnyVideoId || doc.id}" class="video-card">
                            <div class="video-thumbnail">
                                <div class="video-thumbnail-placeholder">üé¨</div>
                                <span class="video-duration">${v.duration || '10:00'}</span>
                                ${v.visibility === 'subscribers' ? '<span class="video-badge">EXCLUSIVE</span>' : ''}
                            </div>
                            <h3 class="video-title">${v.title || 'Untitled'}</h3>
                            <div class="video-meta">${v.views || 0} views ‚Ä¢ ${formatDate(v.createdAt)}</div>
                        </a>
                    `;
                });
                container.innerHTML = html;
            } catch (e) {
                console.error(e);
                container.innerHTML = '<div class="empty-state" style="grid-column:1/-1;"><div class="empty-state-icon">üé¨</div><h3>No Videos Yet</h3></div>';
            }
        }

        function formatDate(ts) {
            if (!ts) return 'Just now';
            const d = ts.toDate ? ts.toDate() : new Date(ts);
            const days = Math.floor((new Date() - d) / 86400000);
            if (days === 0) return 'Today';
            if (days === 1) return 'Yesterday';
            if (days < 7) return days + ' days ago';
            return d.toLocaleDateString();
        }

        showDemoProfile();
        loadVideos();
    </script>

    <script>
        function showTab(name) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(name + 'Tab').classList.add('active');
        }
    </script>
</body>
</html>
